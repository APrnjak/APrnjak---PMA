#pragma checksum "C:\Users\prnja\Desktop\PMA_projekt Final\PMA_projekt\Views\Post\Post.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "fed8ecf067fe1fdd50935569bc7c1f584c052043"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Post_Post), @"mvc.1.0.view", @"/Views/Post/Post.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\prnja\Desktop\PMA_projekt Final\PMA_projekt\Views\_ViewImports.cshtml"
using PMA_projekt;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\prnja\Desktop\PMA_projekt Final\PMA_projekt\Views\_ViewImports.cshtml"
using PMA_projekt.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\prnja\Desktop\PMA_projekt Final\PMA_projekt\Views\Post\Post.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"fed8ecf067fe1fdd50935569bc7c1f584c052043", @"/Views/Post/Post.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"682483adb620494118463190569da3f077a68215", @"/Views/_ViewImports.cshtml")]
    public class Views_Post_Post : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 2 "C:\Users\prnja\Desktop\PMA_projekt Final\PMA_projekt\Views\Post\Post.cshtml"
  
    ViewData["Title"] = "Post";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
            WriteLiteral(@"
<!-- Page Container -->
<div class=""w3-container w3-content"" style=""max-width:1400px;margin-top:80px"">
    <!-- The Grid -->
    <div class=""w3-row"">

        <!-- Middle Column -->
        <div class=""w3-container w3-card w3-white w3-round w3-margin"" style=""width:90%;opacity:0.95"">
            <table class=""table table-bordered"" id=""tablica"">
                <thead id=""thead""></thead>
                <tbody id=""tbody""></tbody>
            </table>
        </div>

    </div>
</div>


<script>
    'use strict'

    function appendTableHead(single) {
        let thead = document.getElementById(""thead"");
        let tbody = document.getElementById(""tbody"");

        thead.innerHTML = """";  //kada ponovno pozovemo api da se ne poduplaju nazivi stupaca
        tbody.innerHTML = """";

        let header = domHelper.createTableHeader(single);
        thead.appendChild(header);
    }

    function appendToTable(data) {

        posts = data;
        appendTableHead(data[0]);
       ");
            WriteLiteral(@" let tbody = document.getElementById('tbody');

        for (var i = 0; i < data.length; i++) {
            let row = document.createElement(""tr"");
            var objekt = data[i].objekt.vlasnik + "" "" + data[i].objekt.naziv;
            let podaci = [data[i].id, data[i].sadrzaj, data[i].datum, data[i].grad.naziv, objekt]
            for (var j = 0; j < podaci.length + 1; j++) {
                let td = document.createElement(""td"");
                td.setAttribute(""class"", ""align-middle"");
                if (j == podaci.length) {  //ako smo ispisali sve podatke sada trebamo dodati dva botuna
                    let button = document.createElement(""button"");
                    button.id = podaci[0]; //saljemo id-knjige da znamo koji element trebamo izbrisati
                    button.setAttribute(""class"", ""btn btn-link"");
                    button.onclick = function () { Delete(podaci[0]); }; //pozivamo odgovarajuci funkciju i parametre
                    let span = document.createElement(""s");
            WriteLiteral(@"pan"");
                    span.setAttribute(""class"", ""material-icons"");
                    let t = document.createTextNode(""Delete"");
                    span.appendChild(t);
                    td.appendChild(button);
                    button.appendChild(span);


                    let button2 = document.createElement(""button"");
                    button2.id = podaci[0];
                    button2.setAttribute(""class"", ""btn btn-link"");
                    button2.onclick = function () { Update(podaci); };
                    td.appendChild(button2);
                    let span1 = document.createElement(""span"");
                    span1.setAttribute(""class"", ""material-icons"");
                    let t1 = document.createTextNode(""Update"");
                    span1.appendChild(t1);
                    button2.appendChild(span1);


                }
                else { //ako nije ispisao sve podatke - stvori obican tekstNode
                    let text = document.createTextNo");
            WriteLiteral("de(podaci[j]);\r\n                    td.appendChild(text);\r\n                }\r\n                row.appendChild(td);\r\n            }\r\n            tbody.appendChild(row);\r\n        }\r\n    }\r\n\r\n    function Delete(id) {\r\n        var authorization = \"");
#nullable restore
#line 89 "C:\Users\prnja\Desktop\PMA_projekt Final\PMA_projekt\Views\Post\Post.cshtml"
                        Write(User.Identity.Name.ToString());

#line default
#line hidden
#nullable disable
            WriteLiteral(@""";
        if (authorization == ""Klara"") {
            if (confirm(""Sigurno Å¾elite izbrisati knjigu sa ID-om "" + id)) {
                axios.delete(`/api/posts/delete/${id}`,id).then(response => appendToTable(response.data));
                alert(""Podatak je izbrisan"");
            }
            else {
                return;
            }
        }
        else {
            window.location = ""/Home/AccessDenied"";
        }
    }

    function Update(podaci) {
        var authorization = """);
#nullable restore
#line 105 "C:\Users\prnja\Desktop\PMA_projekt Final\PMA_projekt\Views\Post\Post.cshtml"
                        Write(User.Identity.Name.ToString());

#line default
#line hidden
#nullable disable
            WriteLiteral(@""";
        if (authorization == ""Klara"") {
            sessionStorage.setItem(""id"", podaci[0]);
            window.location.href = '/Post/UpdatePost';   //rutu radimo prema folderima Views
        }
        else {
            window.location = ""/Home/AccessDenied"";
        }
    }

    //odmah saljemo get zahtjev
    //pri ulasku na ovaj View podatci ce nam se odmah ucitati u tablicu
    var posts;
    axios.get('/api/post').then(response => appendToTable(response.data));

</script>

<style>
    body, h1, h2, h3, h4, h5, h6 {
        font-family: ""Karma"", sans-serif;
        background: url(https://images.unsplash.com/photo-1493770348161-369560ae357d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80);
        background-repeat: no-repeat;
        background-size: 100%;
    }

    .w3-bar-block .w3-bar-item {
        padding: 20px
    }
</style>

");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
